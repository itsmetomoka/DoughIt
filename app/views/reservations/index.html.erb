<div class = "container">
	<div class="main-box clearfix">
		<%= render 'layouts/sidebar' %>
		<div class = "main-content">
		
			<% if flash[:validate] %>
				<p class ="alert error-message-box"><%= flash[:validate] %></p>
			<% end %>
			<div class="row mt-5">
				<div class="underbar">
					<h2>予約一覧</h2>
				</div>
			</div>

			<div class="row my-5">
				<div class = "reservation-sort">
					<%= form_with model: @reservation, url:lesson_reservations_path, method: :get, local: true do |form| %>
						<div class = "reservation-sort__key">
							<%= form.select :sort, [['予約順', 'old'],['開催日順','date']] %>
						</div>
						<div class = "reservation-sort__button">
							<%= form.submit '並び替える' %>
						</div>
					<% end %>
				</div>
				<div class="col-md-8 offset-md-2">
					<div class = "row">

						<table class ="table table-hover">
							<tr>
								<th class = "table-lesson">レッスン名</th>
								<th class = "table-date">開催日時</th>
								<th class = 'table-content'>レッスン内容</th>
							</tr>
							<% @lessons.each do |lesson| %>
								<% unless lesson.event_date <= DateTime.now %>
									<tr>
										<td>
											<%= link_to lesson_path(lesson.id) do %>
												<%= lesson.name %>
											<% end %>
										</td>
										<td><%= l lesson.event_date %></td>
										<td><%= lesson.content %></td>
									</tr>
								<% end %>
							<% end %>
						</table>
					</div>
				</div>
				<div class="link-center">
					<%= paginate @lessons %>
				</div>
			</div>
			<%= render'simple_calendar/lesson-calendar', lessons: @lessons_calendar %>
			<div class = "link-button-sm-center">
				<%= link_to "TOPページへ", top_path, class:"button-font" %>
			</div>
		</div>
	</div>
</div>